
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Deploy Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="onesignal.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">FrontEnd</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../front-end/">
            
                <a href="../front-end/">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../front-end/technologies.html">
            
                <a href="../front-end/technologies.html">
            
                    
                    Technologies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../front-end/installation.html">
            
                <a href="../front-end/installation.html">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../front-end/installation/full-version.html">
            
                <a href="../front-end/installation/full-version.html">
            
                    
                    Full Version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../front-end/installation/gitstrap-tools.html">
            
                <a href="../front-end/installation/gitstrap-tools.html">
            
                    
                    GitStrap Tools
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../front-end/guide.html">
            
                <a href="../front-end/guide.html">
            
                    
                    Guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../front-end/guide/customize.html">
            
                <a href="../front-end/guide/customize.html">
            
                    
                    Customize
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../front-end/packages.html">
            
                <a href="../front-end/packages.html">
            
                    
                    Packages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../front-end/release-notes.html">
            
                <a href="../front-end/release-notes.html">
            
                    
                    Release Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../front-end/faqs.html">
            
                <a href="../front-end/faqs.html">
            
                    
                    FAQs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../front-end/license.html">
            
                <a href="../front-end/license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">BackEnd</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="chapter1.html">
            
                <a href="chapter1.html">
            
                    
                    Technologies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="installation.html">
            
                <a href="installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="outline.html">
            
                <a href="outline.html">
            
                    
                    Outline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="middlewares.html">
            
                <a href="middlewares.html">
            
                    
                    Middlewares
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="signup.html">
            
                <a href="signup.html">
            
                    
                    Signup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="otpverify.html">
            
                <a href="otpverify.html">
            
                    
                    otpVerify
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.3" data-path="chatroom.html">
            
                <a href="chatroom.html">
            
                    
                    Chatroom
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="services.html">
            
                <a href="services.html">
            
                    
                    Services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1" data-path="channel.html">
            
                <a href="channel.html">
            
                    
                    Channel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.2" data-path="channelmessages.html">
            
                <a href="channelmessages.html">
            
                    
                    channelMessages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.3" data-path="users.html">
            
                <a href="users.html">
            
                    
                    users
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="other-services.html">
            
                <a href="other-services.html">
            
                    
                    Other Services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.7.1" data-path="twillio.html">
            
                <a href="twillio.html">
            
                    
                    Twillio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.2" data-path="onesignal.html">
            
                <a href="onesignal.html">
            
                    
                    OneSignal
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="2.8" data-path="deploy.html">
            
                <a href="deploy.html">
            
                    
                    Deploy
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Deploy</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="deploying-code-on-server">Deploying code on Server</h1>
<p>Deploying is a big part of the lives of most  developers . We don&apos;t have a release manager and there are no set weekly deploys. Developers and designers are responsible for shipping new stuff themselves as soon as it&apos;s ready. This means that deploying needs to be as smooth and safe a process as possible.</p>
<p>The best system we&apos;ve found so far to provide this flexibility is to have people deploy branches. We have taken special care of to roll out repetitive work so if any new branch merges with master it automatically deploy itself.</p>
<p>We have taken special care that master remains stable and is always working with the latest for that we have two servers namily</p>
<p>Staging and Production .This means that master is always stable; a safe point that we can roll back to if there&apos;s a problem.By default staging server points to the Develop/Development branch of the code and production server points to master branch of the code.</p>
<h3 id="deploying-libraries">Deploying Libraries</h3>
<p>There may be times when you want to make a library available to your team without making it public. This is best done by setting up a private repository. </p>
<h4 id="static-http">Static HTTP</h4>
<p>The simplest kind of private repository is a web server pointed at a directory full of static files. You can use a<code>file:///</code>URL in your<code>:repositories</code>to deploy that way if the directory is local to the machine on which Leiningen is running.</p>
<h1 id="setting-up-the-sync-messaging-app-backend">Setting up the Sync-Messaging App Backend</h1>
<h2 id="local-server">LOCAL SERVER</h2>
<p>1.clone the repo from </p>
<pre><code>  http://gitlab.sahusoft.com/products/messaging-app-backend
</code></pre><ol>
<li>goto project cloned repo.</li>
<li>git pull origin <branch-name></branch-name></li>
<li>In app directory open <code>./config/default.json</code>.Here you will find the configuration of host and port number<pre><code> {
 &quot;host&quot;: &quot;localhost&quot;,
 &quot;port&quot;: 3030,
 &quot;mongodb&quot;: &quot;mongodb://localhost:27017/Sync-chat-local&quot;,
 &quot;public&quot;: &quot;../public/&quot;
 }
</code></pre> you can edit the environment configuration variables here.<ul>
<li>edit  <code>~./bashrc</code> and add <code>export NODE_ENV=default</code></li>
<li>run <code>npm start</code></li>
</ul>
</li>
</ol>
<h2 id="staging-or-production-server">STAGING OR PRODUCTION SERVER</h2>
<h3 id="step-1">Step 1:</h3>
<p>To access the server you can <strong>SSH</strong>:-
      Staging - <code>ssh messaging-app-backend@ded1.geekydev.com</code>
      Production - <code>ssh messaging-app-backend-staging@ded1.geekydev.com</code></p>
<h3 id="step-2">Step 2:</h3>
<p>Go inside the project directory <code>cd Sites/projects/messaging-app-backend</code>  </p>
<ol>
<li><p>For STAGING</p>
<ul>
<li>git pull origin development</li>
<li>in app directory open <code>./config/staging.json</code><pre><code>{
&quot;host&quot;: &quot;http://messaging-app-backend-staging.geekydev.com/&quot;,
&quot;port&quot;: 3040,
&quot;mongodb&quot;: &quot;mongodb://localhost:27017/Sync-chat-staging&quot;,
&quot;public&quot;: &quot;../public/&quot;
}
</code></pre><ul>
<li>edit  <code>~./bashrc</code> and add <code>export NODE_ENV=staging</code></li>
<li>git commit -am &quot;YOUR MODIFICATION MESSAGE&quot;</li>
<li>git push origin development</li>
<li>Restart the server:
<code>node src/index.js</code>
<code>forever list</code></li>
<li>You will get an id of the app, from which you can
<code>forever restart &lt;ID&gt;</code></li>
</ul>
</li>
</ul>
</li>
<li><p>For PRODUCTION</p>
<ul>
<li>git pull origin master</li>
<li><p>in app directory open <code>./config/production.json</code>. This is where you will find the configuration settings.</p>
<pre><code> {
   &quot;host&quot;: &quot;messaging-app-backend.geekydev.com&quot;,
   &quot;port&quot;: 3035,
   &quot;mongodb&quot;: &quot;mongodb://localhost:27017/Sync-chat&quot;,
   &quot;public&quot;: &quot;../public/&quot;
 }
</code></pre></li>
<li>edit <code>~./bashrc</code> and add <code>export NODE_ENV=production</code></li>
<li>git commit -am &quot;YOUR MODIFICATION MESSAGE&quot;</li>
<li>git push origin development</li>
<li>Restart the server:
<code>node src/index.js</code>
<code>forever list</code><ul>
<li>You will get an id of the app, from which you can
<code>forever restart &lt;ID&gt;</code></li>
</ul>
</li>
</ul>
</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="onesignal.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: OneSignal">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Deploy","level":"2.8","depth":1,"previous":{"title":"OneSignal","level":"2.7.2","depth":2,"path":"back-end/onesignal.md","ref":"./back-end/onesignal.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"back-end/deploy.md","mtime":"2017-02-08T13:12:32.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-02-08T14:07:53.433Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

